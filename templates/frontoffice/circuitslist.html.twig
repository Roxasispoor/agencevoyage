{# templates/circuitslist.html.twig #}

{% extends "baselayout.html.twig" %}

{% block title %}{{ parent() }} - Circuits list{% endblock %}
{% block body %}
    <h1>List of circuits</h1>
    {% if circuitslist is not empty %}
        <p>Here are all your circuits:</p>
        <ul>
        {# Loop through list and creeate the list of circuit items. #}
        {% for circuit in circuitslist %}
            {%  set counter=0 %}
            {% for program in circuit.programmations  %}

            {% if program.dateDepart|date('Ymd') >= "now"|date('Ymd') %}
            {% set counter= counter + 1 %}
            {% endif %}
            {% endfor %}
                <li>

                <a href="{{ path('circuitshowuser', { 'id' : circuit.id }) }}">{{ circuit.description }}</a>
                 {% if counter == 0  %}
                    [Actuellement indisponible]
                    {% else %}
                    [{{ counter }} dates disponibles!]
                    {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>Sorry, you don't have any circuits yet!</p>
    {% endif %}

{% endblock %} {# body #}
